<html>
  <head>
    <script
      src="https://cdn.socket.io/4.3.2/socket.io.min.js"
      integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs"
      crossorigin="anonymous"
    ></script>
    <script>
      const socket = io('http://localhost:3000');
      socket.on('connect', function () {
        console.log('Connected');

        const currentPlayer = localStorage.getItem('player');
        const player = currentPlayer ? JSON.parse(currentPlayer) : null;
        const currentGame = localStorage.getItem('game');
        const game = currentGame ? JSON.parse(currentGame) : null;

        if (player?.status === 'waiting') {
          // check for user
        } else if (player?.status === 'playing') {
          // try to make move
        }

        console.log(player);
        // Init Player & Game
        socket.emit('init-shake', { player, game });
      });

      socket.on('init-player', (data) => {
        console.log('init-player', data);
        localStorage.setItem('player', JSON.stringify(data.player));
      });

      socket.on('init-game', (data) => {
        console.log('init-game', data);
        localStorage.setItem('game', JSON.stringify(data.game));
      });

      socket.on('error', (data) => console.log('error', data));

      socket.on('disconnect', function () {
        console.log('Disconnected');
      });
    </script>
  </head>

  <body></body>
</html>
